<div class="px-4 pt-1">
  <div class="breadcrumb">
    <app-bread-crumb [listBreadCrumb]="listBreadCrumb"></app-bread-crumb>
    <span>ChartType</span>
    <span>Status</span>
  </div>
  <div class="card">
    <div class="card-header d-flex">
      <div class="col-6 p-0">
        <app-search
          [placeholder]="'Search by Chart Detail Name'"
          [seachText]="searchText"
          (onSearch)="onSearchEnter($event)"
        ></app-search>
      </div>
      <div class="col-3">
        <table-filter
          [filterType]="filterTypeEnum.MultiSelect"
          [dropdownData]="statusList"
          [placeholder]="'Status'"
          [defaultValue]="defaultValue"
        >
        </table-filter>
      </div>
      <div class="col-3 p-0 mt-1 text-right">
        <app-create-button
          *ngIf="isShowCreateBtn()"
          (create)="onCreate()"
        ></app-create-button>
      </div>
    </div>
    <div class="card-body pb-1" id="bg-table">
      <div class="table-responsive">
        <div class="fixTableHead">
          <table class="table table-striped table-hover" [busy]="isLoading">
            <thead>
              <tr>
                <th class="col-stt">#</th>
                <th>Name</th>
                <th>Color</th>
                <th>Selected</th>
                <th>Active</th>
                <th class="col-action">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="
                  let chartDetail of chartDetailList
                    | paginate
                      : {
                          id: 'server',
                          itemsPerPage: pageSize,
                          currentPage: pageNumber,
                          totalItems: totalItems
                        };
                  let i = index
                "
                (dblclick)="goToChartPage()"
              >
                <td class="text-center">
                  {{ (pageNumber - 1) * pageSize + i + 1 }}
                </td>
                <td>{{ chartDetail.name }}</td>
                <td class="col-color text-center">
                    <span
                      class="badge text-white"
                      [style.backgroundColor]="chartDetail.color"
                    >
                      {{ chartDetail.color }}
                    </span>
                  </td>
                <td class="text-center">
                  {{ chartDetail.Selected }}
                </td>
                <td class="text-center">
                  <div class="custom-control custom-checkbox">
                    <input
                      type="checkbox"
                      class="custom-control-input"
                      disabled
                      [checked]="chartDetail.isActive"
                    />
                    <label class="custom-control-label"></label>
                  </div>
                </td>
                <td class="text-center"> 
                  <div
                    style="visibility: hidden; position: fixed"
                    [style.right]="contextMenuPosition.x"
                    [style.top]="contextMenuPosition.y"
                    [matMenuTriggerFor]="menu"
                  ></div>
                  <button mat-button [matMenuTriggerFor]="menu">
                    <i class="fas fa-bars fa-lg"></i>
                  </button>
                  <mat-menu #menu="matMenu" class="p-2">
                    <button
                      *ngIf="isShowEditBtn()"
                      (click)="onUpdate(chartDetail)"
                      class="mat-menu-item w-100"
                    >
                      <i class="fas fa-pencil-alt mr-1"></i>
                      <span>Edit</span>
                    </button>
                    <button
                      *ngIf="isShowActiveBtn()"
                      class="mat-menu-item"
                      (click)="onActive(chartDetail)"
                    >
                      <i class="fas fa-edit fa-lg mr-1"></i>
                      <span>Active</span>
                    </button>
                    <button
                      *ngIf="isShowDeleteBtn()"
                      class="mat-menu-item w-100"
                      (click)="onDelete(chartDetail)"
                    >
                      <i class="fas fa-trash fa-lg mr-1"></i>
                      <span>Delete</span>
                    </button>
                  </mat-menu>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <pagination-control
        [totalItems]="totalItems"
        [pageSize]="pageSizeType"
        (pageAction)="pageControlActions($event)"
      ></pagination-control>
    </div>
  </div>
</div>
